# 项目简介
Welcome to Pandora World! 一个把中文表达式脚本进行AST转换后生成jvm字节码的简易编译工具。

## 背景问题
此编译工具诞生于风控平台中的决策引擎，主要是为了解决传统决策引擎使用动态类型脚本进行解析执行时性能较慢的问题。当我们在项目中
把一段风控规则从C++应用迁移到Java实现的决策引擎应用中去时，发现决策引擎处理规则的响应时间远远高于C++应用，性能下降了上百倍，
我们从决策引擎的执行过程分析中发现，它把策略人员开发的规则脚本转换成动态类型脚本进行解析，生成对应的AST，然后对其进行解析执行，
其过程中生成大量的中间值，占用不少的内存，同时简单的计算指令也要经过多次函数调用才能完成，其性能自然大幅降低。如果我们能够把动
态类型脚本进行类型静态化，同时对其进行编译后执行对应的字节码，那么其性能肯定会有所提升。

## 动态脚本静态化
在大部分可以预先知道规则所使用的数据的类型情况下，可以预先定义好数据类型并和脚本结合，达到数据类型的静态化，提升“动态”脚本的执行
效率。
在各种业务场景中，经常会遇到需要对业务规则进行灵活调整的"重规则"场景，无论是在风控类场景，还是在营销类场景，又或者在审批类场景，
都经常遇到规则的频繁调整， 如果把对应的业务规则编码在应用中，则无法动态灵活地对其进行响应，特别是在大数据大模型的风控决策场景中
更甚。在风控场景中，开发团队通常会划分出三种角色，策略运营、数据算法和应用开发，分别对策略规则进行开发，对数据进行特征清洗和
模型进行训练，对风控平台应用功能进行开发。所以对策略运营人员提供的规则脚本编辑功能应该尽量屏蔽技术开发的细节，例如函数的定义、变量
的声明、数组的使用等等，避免对策略运营人员造成技术认知负担，所以后台开发人员一般会优先考虑使用策略运营人员更容易理解的动态类型脚本
来提供规则的开发能力，因为动态类型不需要进行变量类型申明，同时只要不提供数组和函数的相关功能，则可以对策略运营人员做到技术透明。但
是动态类型脚本需要在运行时进行类型判断，这样增加了规则逻辑的计算量，必然会带来一定的性能损耗。
我们让开发人员进行数据类型定义，而让策略人员进行规则编写，最终两者结合在一起进行运行，以达到减少动态类型判断的计算量。

## 编译执行
